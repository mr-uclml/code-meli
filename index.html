<!DOCTYPE html>
<html lang="fa">
<head>
   <style>
  /* این CSS یک مشتی است با تم سبز، سیاه و قرمز */

/* استایل فیلد و دکمه ها */
.input-container {
  margin-bottom: 20px;
}

.input-field {
  width: 100%;
  padding: 10px;
  box-sizing: border-box;
  border: 2px solid #006400; /* سبز */
  border-radius: 5px;
  font-size: 16px;
  outline: none;
}

/* استایل دکمه ها */
.btn {
  padding: 10px 20px;
  background-color: #006400; /* سبز */
  color: #fff; /* سفید */
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: 16px;
}

.btn:hover {
  background-color: #8F0000; /* قرمز تیره */
}

/* استایل پیغام خطا */
.error-message {
  color: #8F0000; /* قرمز تیره */
  font-size: 14px;
  margin-top: 5px;
}

/* استایل پیغام موفقیت */
.success-message {
  color: #006400; /* سبز */
  font-size: 14px;
  margin-top: 5px;
}

   </style>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ساخت کد ملی</title>
</head>
<body>
  <input type="text" id="codeMelliField" placeholder="کد ملی را وارد کنید">
  <button onclick="document.getElementById('codeMelliField').value = generator()">ساخت کدملی</button>
  <button onclick="document.getElementById('codeMelliField').value = roundGenerator()">ساخت کدملی رند</button>
  <button onclick="validateCodeMelli()">بررسی صحت کد ملی</button>

  <script>
    function validator(val) { 
      var allDigitEqual = ["0000000000", "1111111111", "2222222222", "3333333333", "4444444444", "5555555555", "6666666666", "7777777777", "8888888888", "9999999999"];
      codeMelliPattern = /^([0-9]{10})+$/;
      if (allDigitEqual.indexOf(val) != -1 || !codeMelliPattern.test(val)) {
          return false;
      }
      var chArray = Array.from(val);
      var num0 = parseInt(chArray[0]) * 10;
      var num2 = parseInt(chArray[1]) * 9;
      var num3 = parseInt(chArray[2]) * 8;
      var num4 = parseInt(chArray[3]) * 7;
      var num5 = parseInt(chArray[4]) * 6;
      var num6 = parseInt(chArray[5]) * 5;
      var num7 = parseInt(chArray[6]) * 4;
      var num8 = parseInt(chArray[7]) * 3;
      var num9 = parseInt(chArray[8]) * 2;
      var a = parseInt(chArray[9]);
      var b = (((((((num0 + num2) + num3) + num4) + num5) + num6) + num7) + num8) + num9;
      var c = b % 11;
      return (((c < 2) && (a == c)) || ((c >= 2) && ((11 - c) == a)));
    }

    function roundGenerator() {
      var list = [],
          sum = 0;
      var j = 10;
      for (var i = 10; i > 1; i--) {
          j = Math.floor(Math.random() * Math.floor(j < 2 ? 2 : j))
          list.push(j);
          sum += j * i;
      }

      var s = sum % 11;
      if (s < 2) {
          list.push(s);
      } else if (s >= 2) {
          list.push(11 - s);
      }
      if (list.filter(function(a) {
              return a != list[0];
          }).length == 0) {
          return roundGenerator();
      }
      return list.join('');
    }

    function generator() {
      var list = [],
          sum = 0;
      for (var i = 10; i > 1; i--) {
          var j = Math.floor(Math.random() * Math.floor(10))
          list.push(j);
          sum += j * i;      
      }

      var s = sum % 11;
      if (s < 2) {
          list.push(s);
      } else if (s >= 2) {
          list.push(11 - s);
      }

      return list.join('');
    }

    function validateCodeMelli() {
      var codeMelli = document.getElementById('codeMelliField').value;
      if (validator(codeMelli)) {
        alert('کد ملی معتبر است.');
      } else {
        alert('کد ملی نامعتبر است.');
      }
    }
  </script>
</body>
</html>
